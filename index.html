<!DOCTYPE html>
<html>
<head>
  <title>Scope Sheet Form</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/supabase.min.js"></script>
</head>
<body>
  <h1>Scope Sheet Submitted</h1>

  <script>
    window.onload = async () => {
      const supabase = supabase.createClient(
        'https://hobhuqbsiqboovhoipeo.supabase.co',
        'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhvYmh1cWJzaXFib292aG9pcGVvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgyODg3OTQsImV4cCI6MjA2Mzg2NDc5NH0.8iDzmTgUybI50e27fcIV0f3rjXxsxBOVKSH9btnY5dw'
      );

      const urlParams = new URLSearchParams(window.location.search);
      const formData = {
        claim_number: urlParams.get('claim_number'),
        insured_name: urlParams.get('insured_name'),
        property_address: urlParams.get('property_address'),
        date_of_inspection: urlParams.get('date_of_inspection'),
        time_of_inspection: urlParams.get('time_of_inspection'),
        persons_present: urlParams.get('persons_present'),
        damage_description: urlParams.get('damage_description'),
        estimated_cost: urlParams.get('estimated_cost'),
        photo_url: urlParams.get('photo_url'),
      };

      const { data, error } = await supabase
        .from('scope_sheets')
        .insert([formData]);

      if (error) {
        console.error('Insert error:', error.message);
      } else {
        console.log('Insert success:', data);
      }
    };
  </script>
</body>
</html>
